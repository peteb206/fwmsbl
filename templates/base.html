<!DOCTYPE html>
<html>

<head>
    <title>Fort Worth Men's Senior Baseball League</title>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.min.js"></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.7.1/js/dataTables.buttons.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.25/css/jquery.dataTables.min.css">
    <link rel="stylesheet" type="text/css"
        href="https://cdn.datatables.net/buttons/1.7.1/css/buttons.dataTables.min.css">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='img/apple-touch-icon.png') }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='img/favicon-32x32.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='img/favicon-16x16.png') }}">
    <link rel="manifest" href="{{ url_for('static', filename='img/manifest.json') }}">
    <script>
        // Mobile vs. Desktop
        let isMobile = function () {
            return window.matchMedia("only screen and (max-width: 760px)").matches;
        };

        let resizeCalendar = function (containerDiv, listOnly) {
            containerDiv.find('table.fc-list-table').each(function () {
                containerDiv.height($(this).height() + containerDiv.find('div.fc-header-toolbar').height() + 24);
            });
        }

        // Form
        let formOnSubmit = function (event) {
            alert('Submission successful... thank you!');
            setTimeout(function() {}, 2000);
        }

        // Calendar
        let buildCalendar = function () {
            let mobile = isMobile();
            let canNavigate = $('select#league').length;
            let league = canNavigate ? $('select#league').val() : '';
            let team = canNavigate ? $('select#team').val() : '';

            var calendar = new FullCalendar.Calendar($('div#calendar')[0], {
                timeZone: 'America/Chicago',
                initialView: canNavigate ? 'listMonth' : 'listWeek',
                headerToolbar: {
                    start: canNavigate ? ('prev,next' + (mobile ? '' : ' today')) : '',
                    center: canNavigate ? 'title' : '',
                    end: canNavigate ? (mobile ? 'today' : 'listMonth dayGridMonth,timeGridWeek,timeGridDay') : ''
                },
                buttonText: {
                    today: 'Today',
                    month: 'Month',
                    week: 'Week',
                    day: 'Day',
                    list: 'List'
                },
                events: 'api/events?league=' + league + '&team=' + team,
                displayEventEnd: false,
                listDayFormat: {
                    month: 'long',
                    day: 'numeric',
                    year: 'numeric'
                },
                listDaySideFormat: {
                    weekday: 'long'
                },
                windowResize: function (arg) { resizeCalendar($('div#calendar'), !canNavigate) },
                eventsSet: function (events) { resizeCalendar($('div#calendar'), !canNavigate) },
                eventDidMount: function () {

                }
            });

            calendar.render();

            if (canNavigate) {
                // Schedule page
                $('h2.fc-toolbar-title')
                    .addClass('light-text')
                    .css('text-align', 'center');
            }
        }
    </script>
</head>

<body>
    <div id="body-wrapper" class="container" style="max-width: 1200px">
        <div id="nav-placeholder">
            {% include 'nav.html' %}
        </div>
        <div id="content-placeholder">
            {% block content %}{% endblock %}
        </div>
    </div>
</body>

</html>